<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dimdim Dino POS</title>

<style>
*{box-sizing:border-box;font-family:Arial;margin:0;padding:0}
body{background:#0f3d2e;color:#fff}
.hidden{display:none}

.container{padding:16px}
.card{
  background:#134e3a;
  border-radius:14px;
  padding:16px;
  margin-bottom:16px;
}

h1,h2,h3{margin-bottom:8px}
button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:10px;
  background:#22c55e;
  font-weight:bold;
  margin-top:10px;
}
input{
  width:100%;
  padding:12px;
  border-radius:8px;
  border:none;
  margin-top:8px;
}

.menu-grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}

.menu-item{
  background:#22c55e;
  color:#000;
  padding:14px;
  border-radius:12px;
  font-weight:bold;
}

.header{
  text-align:center;
  font-size:20px;
  font-weight:bold;
  padding:16px;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="loginPage" class="container">
  <div class="card">
    <h2>Login Kasir</h2>
    <input id="user" placeholder="Username">
    <input id="pass" type="password" placeholder="Password">
    <button onclick="login()">MASUK</button>
  </div>
</div>

<!-- HOME -->
<div id="homePage" class="hidden container">
  <div class="header">DIMDIM DINO POS</div>
  <div class="card">
    <button onclick="openKasir()">KASIR</button>
    <button onclick="openMenu()">DAFTAR MENU</button>
  </div>
</div>

<!-- DAFTAR MENU -->
<div id="menuPage" class="hidden container">
  <div class="card">
    <h3>Daftar Menu</h3>
    <input id="menuName" placeholder="Nama Menu">
    <input id="menuPrice" type="number" placeholder="Harga">
    <button onclick="saveMenu()">Simpan Menu</button>
    <div id="menuList"></div>
    <button onclick="backHome()">Kembali</button>
  </div>
</div>

<!-- KASIR -->
<div id="kasirPage" class="hidden container">
  <div class="card">
    <h3>Pilih Menu</h3>
    <div id="kasirMenu" class="menu-grid"></div>
    <hr>
    <h3>Keranjang</h3>
    <div id="cart"></div>
    <h2 id="total">Total: Rp 0</h2>
    <button onclick="printStruk()">CETAK STRUK</button>
    <button onclick="backHome()">Kembali</button>
  </div>
</div>

<script>
const USERS={admin:'1234'};
let cart=[];

function login(){
  if(USERS[user.value]===pass.value){
    loginPage.classList.add('hidden');
    homePage.classList.remove('hidden');
  } else alert('Login salah');
}

function backHome(){
  menuPage.classList.add('hidden');
  kasirPage.classList.add('hidden');
  homePage.classList.remove('hidden');
}

function openMenu(){
  homePage.classList.add('hidden');
  menuPage.classList.remove('hidden');
  renderMenuList();
}

function saveMenu(){
  const menus=JSON.parse(localStorage.getItem('menus')||'[]');
  menus.push({name:menuName.value,price:Number(menuPrice.value)});
  localStorage.setItem('menus',JSON.stringify(menus));
  menuName.value='';menuPrice.value='';
  renderMenuList();
}

function renderMenuList(){
  const menus=JSON.parse(localStorage.getItem('menus')||'[]');
  menuList.innerHTML=menus.map(m=>`${m.name} - Rp ${m.price}`).join('<br>');
}

function openKasir(){
  homePage.classList.add('hidden');
  kasirPage.classList.remove('hidden');
  cart=[];
  renderKasir();
}

function renderKasir(){
  const menus=JSON.parse(localStorage.getItem('menus')||'[]');
  kasirMenu.innerHTML='';
  menus.forEach(m=>{
    const d=document.createElement('div');
    d.className='menu-item';
    d.innerText=`${m.name}\nRp ${m.price}`;
    d.onclick=()=>addCart(m);
    kasirMenu.appendChild(d);
  });
  renderCart();
}

function addCart(m){
  cart.push(m);
  renderCart();
}

function renderCart(){
  let t=0;
  cart.forEach(i=>t+=i.price);
  cartDiv=cart.map(i=>`${i.name} - Rp ${i.price}`).join('<br>');
  cartDiv+=cartDiv?'<hr>':'';
  cart.innerHTML='';
  document.getElementById('cart').innerHTML=cartDiv;
  total.innerText='Total: Rp '+t;
}

function printStruk(){
  const today=new Date().toDateString();
  let no=Number(localStorage.getItem('no_'+today)||1);
  localStorage.setItem('no_'+today,no+1);

  let text='DIMDIM DINO POS\n';
  text+='No: '+no+'\n';
  text+='----------------\n';
  cart.forEach(i=>text+=`${i.name}\nRp ${i.price}\n`);
  text+='----------------\n';
  text+=total.innerText+'\n\n\n';

  const w=window.open('');
  w.document.write('<pre>'+text+'</pre>');
  w.print();
  w.close();
}
</script>

</body>
</html>
